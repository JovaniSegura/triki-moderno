<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triki - Interactivo</title>
    <link rel="stylesheet" href="/assets/css/style.css">

</head>

<body>
    <main>

    </main>
    <aside>
        <a href="/procesar-formulario"><button>Juegar de nuevo</button></a>
    </aside>

    <script>
        let $main = document.querySelector("main")
        let XO = ["X", "O", "X", "O", "X", "O", "X", "O", "X"]
        let llenado = []
        let botonJugardeNuevo = document.querySelector("button")

        for (let i = 0; i < 9; i++) {
            let $input = document.createElement("input")
            $main.appendChild($input)
            $input.type = "button"
            $input.className = "p" + i
            $input.addEventListener("click", () => {
                $input.value = XO.shift()
                $input.style.pointerEvents = "none"
                ganar()
            })
            llenado.push($input)
        }

        function ganar() {
            let posibles = [
                //filas
                [0, 1, 2],
                [3, 4, 5],
                [6, 7, 8],
                //Columnas
                [0, 3, 6],
                [1, 4, 7],
                [2, 5, 8],
                //Diagonales
                [0, 4, 8],
                [2, 4, 6]
            ]

            for (let recorrer of posibles) {
                let [a, b, c] = recorrer
                if (llenado[a].value === llenado[b].value && llenado[b].value === llenado[c].value && llenado[a].value !== "") {
                    setTimeout(() => {
                        alert("Ganaste")
                        location.href = "/procesar-formulario"
                    }, 100)

                    return
                }
            }
        }
    </script>
</body>

</html>